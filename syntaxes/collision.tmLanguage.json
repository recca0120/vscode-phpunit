{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "PHPUnit",
  "patterns": [
    {
      "comment": "Passed test line â†’ green",
      "match": "^\\s+âœ…\\s+.+\\d+\\s*ms",
      "name": "markup.inserted.phpunit"
    },
    {
      "comment": "Failed test line â†’ red (ends with ms)",
      "match": "^\\s+âŒ\\s+.+\\d+\\s*ms",
      "name": "invalid.phpunit"
    },
    {
      "comment": "Ignored/skipped test line â†’ yellow",
      "match": "^\\s+â–\\s+.+",
      "name": "markup.deleted.phpunit"
    },
    {
      "comment": "FAILED error title â†’ only icon+FAILED red, rest default",
      "match": "^(\\s+âŒ\\s+FAILED)(\\s+.+)",
      "captures": {
        "1": { "name": "invalid.phpunit" }
      }
    },
    {
      "comment": "Error line without indent â†’ red",
      "match": "^âŒ\\s+.+",
      "name": "invalid.phpunit"
    },
    {
      "comment": "Printed output â†’ yellow",
      "match": "^ğŸŸ¨\\s+.+",
      "name": "markup.deleted.phpunit"
    },
    {
      "comment": "Arrow source line â†’ arrow+number highlighted, â–• gray, code PHP",
      "match": "(âœ\\s+\\d+\\s+)(â–•)(\\s?.*$)",
      "captures": {
        "1": { "name": "keyword.phpunit" },
        "2": { "name": "comment.phpunit" },
        "3": {
          "name": "meta.embedded.php.phpunit",
          "patterns": [{ "include": "source.php" }]
        }
      }
    },
    {
      "comment": "Source line â†’ line number gray, â–• gray, code PHP",
      "match": "(\\s+\\d+\\s+)(â–•)(\\s?.*$)",
      "captures": {
        "1": { "name": "comment.phpunit" },
        "2": { "name": "comment.phpunit" },
        "3": {
          "name": "meta.embedded.php.phpunit",
          "patterns": [{ "include": "source.php" }]
        }
      }
    },
    {
      "comment": "at file reference â†’ link",
      "match": "^at\\s+\\S+\\.php:\\d+",
      "name": "string.link.phpunit"
    },
    {
      "comment": "File path links",
      "match": "\\S+\\.php:\\d+",
      "name": "string.link.phpunit"
    },
    {
      "comment": "Diff removed line â†’ red",
      "match": "^-\\s+.+",
      "name": "invalid.phpunit"
    },
    {
      "comment": "Diff added line â†’ green",
      "match": "^\\+\\s+.+",
      "name": "markup.inserted.phpunit"
    },
    {
      "comment": "PrettyPrinter box lines â†’ gray",
      "match": "^\\s+[â”â”œâ”‚â”´â”Š].*",
      "name": "comment.phpunit"
    },
    {
      "comment": "Pest summary: N failed â†’ red",
      "match": "\\d+\\s+failed",
      "name": "invalid.phpunit"
    },
    {
      "comment": "Pest summary: N passed â†’ green",
      "match": "\\d+\\s+passed",
      "name": "markup.inserted.phpunit"
    },
    {
      "comment": "Pest summary: N skipped â†’ yellow",
      "match": "\\d+\\s+skipped",
      "name": "markup.deleted.phpunit"
    },
    {
      "comment": "PHPUnit summary: Errors/Failures â†’ red",
      "match": "(Errors|Failures):\\s+\\d+",
      "name": "invalid.phpunit"
    },
    {
      "comment": "PHPUnit summary: Skipped/Incomplete/Risky/Warnings/Deprecations â†’ yellow",
      "match": "(Skipped|Incomplete|Risky|Warnings|PHPUnit Deprecations):\\s+\\d+",
      "name": "markup.deleted.phpunit"
    },
    {
      "comment": "Info lines â†’ gray",
      "match": "^(Time|Duration|Runtime|Configuration|Processes):.*",
      "name": "comment.phpunit"
    },
    {
      "comment": "Duration at end of line â†’ gray",
      "match": "\\d+\\s*ms$",
      "name": "comment.phpunit"
    }
  ],
  "scopeName": "source.phpunit"
}
